<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CraftLauncher</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #0f1729 0%, #1a2332 100%);
      color: #e2e8f0;
      overflow: hidden;
      height: 100vh;
    }

    #app {
      width: 100%;
      height: 100%;
      display: flex;  /* ✅ TOUJOURS FLEX */
      flex-direction: column;
      opacity: 1;  /* Commence invisible */
      transition: opacity 0.6s ease-out;
    }

    #app.loaded {
      opacity: 1;  /* Devient visible */
    }

    /* ✅ TITLEBAR PERSONNALISÉE */
    .titlebar {
      height: 40px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(20, 30, 50, 0.9) 100%);
      border-bottom: 1px solid rgba(99, 102, 241, 0.15);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 16px;
      -webkit-app-region: drag;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .titlebar-title {
      font-weight: 700;
      font-size: 15px;
      color: #e2e8f0;
      display: flex;
      align-items: center;
      gap: 10px;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .titlebar-title::before {
      content: '⛏️';
      font-size: 18px;
    }

    .titlebar-buttons {
      display: flex;
      gap: 10px;
      -webkit-app-region: no-drag;
      align-items: center;
    }

    .titlebar-button {
      width: 36px;
      height: 36px;
      background: rgba(99, 102, 241, 0.08);
      border: 1px solid rgba(99, 102, 241, 0.15);
      color: #cbd5e1;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 6px;
      user-select: none;
    }

    .titlebar-button:hover {
      background: rgba(99, 102, 241, 0.2);
      border-color: rgba(99, 102, 241, 0.3);
      color: #f1f5f9;
      transform: translateY(-1px);
    }

    .titlebar-button:active {
      transform: translateY(0);
      background: rgba(99, 102, 241, 0.15);
    }

    .titlebar-button.minimize:hover {
      background: rgba(34, 197, 94, 0.12);
      border-color: rgba(34, 197, 94, 0.25);
      color: #4ade80;
    }

    .titlebar-button.maximize:hover {
      background: rgba(59, 130, 246, 0.12);
      border-color: rgba(59, 130, 246, 0.25);
      color: #60a5fa;
    }

    .titlebar-button.close:hover {
      background: rgba(239, 68, 68, 0.2);
      border-color: rgba(239, 68, 68, 0.4);
      color: #ff6b6b;
    }

    .titlebar-button.close:active {
      background: rgba(239, 68, 68, 0.25);
    }

/* ✅ LOGIN PAGE - VERSION ULTRA MODERNE */
.login-container {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 100%);
  position: relative;
  overflow: hidden;
}

/* Fond animé avec orbes flottants */
.login-container::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 800px;
  height: 800px;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.25) 0%, transparent 70%);
  border-radius: 50%;
  animation: floatOrb1 12s ease-in-out infinite;
  filter: blur(80px);
  z-index: 1;
}

.login-container::after {
  content: '';
  position: absolute;
  bottom: -40%;
  left: -15%;
  width: 700px;
  height: 700px;
  background: radial-gradient(circle, rgba(139, 92, 246, 0.2) 0%, transparent 70%);
  border-radius: 50%;
  animation: floatOrb2 10s ease-in-out infinite reverse;
  filter: blur(80px);
  z-index: 1;
}

@keyframes floatOrb1 {
  0%, 100% { 
    transform: translate(0, 0) scale(1); 
    opacity: 0.8;
  }
  50% { 
    transform: translate(-30px, 30px) scale(1.1); 
    opacity: 1;
  }
}

@keyframes floatOrb2 {
  0%, 100% { 
    transform: translate(0, 0) scale(1); 
    opacity: 0.7;
  }
  50% { 
    transform: translate(30px, -30px) scale(1.15); 
    opacity: 0.95;
  }
}

/* Grille de points animée en arrière-plan */
.login-background-grid {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(circle at center, rgba(99, 102, 241, 0.12) 1px, transparent 1px),
    radial-gradient(circle at center, rgba(139, 92, 246, 0.08) 1px, transparent 1px);
  background-size: 40px 40px, 60px 60px;
  background-position: 0 0, 30px 30px;
  opacity: 0.4;
  animation: gridMove 20s linear infinite;
  z-index: 2;
}

@keyframes gridMove {
  0% { background-position: 0 0, 30px 30px; }
  100% { background-position: 40px 40px, 70px 70px; }
}

/* Carte de login principale */
.login-box {
  background: rgba(10, 14, 26, 0.9);
  backdrop-filter: blur(40px) saturate(180%);
  border: 1px solid rgba(99, 102, 241, 0.35);
  border-radius: 32px;
  padding: 60px 50px;
  width: 100%;
  max-width: 500px;
  position: relative;
  z-index: 10;
  box-shadow: 
    0 30px 90px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(99, 102, 241, 0.15) inset,
    0 0 120px rgba(99, 102, 241, 0.2);
  animation: slideInLogin 0.9s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideInLogin {
  from {
    opacity: 0;
    transform: translateY(50px) scale(0.94);
    filter: blur(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

/* Effet glow pulsant sur la carte */
.login-box::before {
  content: '';
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  width: 250px;
  height: 250px;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.5) 0%, transparent 70%);
  border-radius: 50%;
  filter: blur(70px);
  z-index: -1;
  animation: pulseGlow 4s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% { 
    opacity: 0.6; 
    transform: translateX(-50%) scale(1); 
  }
  50% { 
    opacity: 0.9; 
    transform: translateX(-50%) scale(1.3); 
  }
}

/* Logo avec animation 3D et particules */
.login-logo {
  width: 110px;
  height: 110px;
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
  border-radius: 26px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 56px;
  font-weight: 700;
  color: white;
  margin: 0 auto 35px;
  box-shadow: 
    0 25px 70px rgba(99, 102, 241, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.12) inset,
    0 0 100px rgba(99, 102, 241, 0.4);
  animation: logoFloat 3.5s ease-in-out infinite;
  position: relative;
  overflow: hidden;
  transform-style: preserve-3d;
}

@keyframes logoFloat {
  0%, 100% { 
    transform: translateY(0px) rotateY(0deg) rotateX(0deg); 
    box-shadow: 0 25px 70px rgba(99, 102, 241, 0.6);
  }
  50% { 
    transform: translateY(-10px) rotateY(8deg) rotateX(3deg); 
    box-shadow: 0 30px 85px rgba(99, 102, 241, 0.8);
  }
}

/* Effet shine animé sur le logo */
.login-logo::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.35) 50%,
    transparent 70%
  );
  animation: logoShine 3s linear infinite;
}

@keyframes logoShine {
  0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
  100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* Particules autour du logo */
.login-logo::after {
  content: '';
  position: absolute;
  top: -20px;
  left: -20px;
  right: -20px;
  bottom: -20px;
  background: conic-gradient(
    from 0deg,
    transparent 0deg,
    rgba(99, 102, 241, 0.3) 45deg,
    transparent 90deg,
    rgba(139, 92, 246, 0.3) 180deg,
    transparent 225deg,
    rgba(168, 85, 247, 0.3) 315deg,
    transparent 360deg
  );
  border-radius: 35px;
  animation: rotateParticles 8s linear infinite;
  z-index: -1;
  filter: blur(15px);
}

@keyframes rotateParticles {
  0% { transform: rotate(0deg); opacity: 0.5; }
  50% { opacity: 0.8; }
  100% { transform: rotate(360deg); opacity: 0.5; }
}

/* Titre avec gradient animé et effet brillant */
.login-title {
  font-size: 38px;
  font-weight: 800;
  text-align: center;
  margin-bottom: 14px;
  background: linear-gradient(
    90deg,
    #6366f1 0%,
    #8b5cf6 20%,
    #a855f7 40%,
    #ec4899 60%,
    #a855f7 80%,
    #6366f1 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradientShift 4s linear infinite;
  letter-spacing: -1px;
  text-shadow: 0 0 30px rgba(99, 102, 241, 0.4);
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

/* Sous-titre */
.login-subtitle {
  text-align: center;
  color: #a1a9b8;
  margin-bottom: 45px;
  font-size: 15px;
  font-weight: 500;
  letter-spacing: 0.4px;
  line-height: 1.5;
  animation: fadeInSubtitle 1s ease-out 0.3s both;
}

@keyframes fadeInSubtitle {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Boutons ultra modernes avec effets avancés */
.btn {
  width: 100%;
  padding: 17px 26px;
  border: none;
  border-radius: 16px;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 18px;
  position: relative;
  overflow: hidden;
  letter-spacing: 0.4px;
  text-transform: none;
}

/* Effet de brillance dynamique sur les boutons */
.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.25);
  transform: translate(-50%, -50%);
  transition: width 0.7s ease-out, height 0.7s ease-out;
}

.btn:hover::before {
  width: 350px;
  height: 350px;
}

/* Effet de lueur sur hover */
.btn::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 16px;
  opacity: 0;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 100%);
  transition: opacity 0.4s;
}

.btn:hover::after {
  opacity: 1;
}

/* Bouton Microsoft avec effet premium */
.btn-microsoft {
  background: linear-gradient(135deg, #0078d4 0%, #0063b1 50%, #004a8c 100%);
  color: white;
  box-shadow: 
    0 10px 28px rgba(0, 120, 212, 0.45),
    0 0 0 1px rgba(255, 255, 255, 0.12) inset,
    0 0 40px rgba(0, 120, 212, 0.3);
  position: relative;
  z-index: 1;
  animation: slideInButton 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.4s both;
}

@keyframes slideInButton {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.btn-microsoft:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 
    0 15px 40px rgba(0, 120, 212, 0.65),
    0 0 0 1px rgba(255, 255, 255, 0.2) inset,
    0 0 60px rgba(0, 120, 212, 0.5);
}

.btn-microsoft:active {
  transform: translateY(-2px) scale(1);
  box-shadow: 
    0 8px 20px rgba(0, 120, 212, 0.5),
    0 0 0 1px rgba(255, 255, 255, 0.15) inset;
}

/* Icône Microsoft SVG intégrée */
.btn-microsoft::before {
  content: '';
  width: 20px;
  height: 20px;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMyAyMyIgZmlsbD0ibm9uZSI+PHBhdGggZD0iTTAgMGgxMXYxMUgwVjB6IiBmaWxsPSIjZjI1MDIyIi8+PHBhdGggZD0iTTEyIDBoMTF2MTFIMTJWMHoiIGZpbGw9IiMwMGE0ZWYiLz48cGF0aCBkPSJNMCAxMmgxMXYxMUgwVjEyeiIgZmlsbD0iIzdmYmEwMCIvPjxwYXRoIGQ9Ik0xMiAxMmgxMXYxMUgxMlYxMnoiIGZpbGw9IiNmZmI5MDAiLz48L3N2Zz4=');
  background-size: contain;
  background-repeat: no-repeat;
  margin-right: -4px;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* Séparateur élégant avec animation */
.login-separator {
  display: flex;
  align-items: center;
  margin: 38px 0;
  gap: 18px;
  animation: fadeInSeparator 0.8s ease-out 0.6s both;
}

@keyframes fadeInSeparator {
  from {
    opacity: 0;
    transform: scaleX(0.8);
  }
  to {
    opacity: 1;
    transform: scaleX(1);
  }
}

.login-separator-line {
  flex: 1;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(99, 102, 241, 0.4) 20%,
    rgba(99, 102, 241, 0.6) 50%,
    rgba(99, 102, 241, 0.4) 80%,
    transparent 100%
  );
  position: relative;
}

.login-separator-line::after {
  content: '';
  position: absolute;
  top: -2px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 5px;
  background: radial-gradient(circle, rgba(99, 102, 241, 0.6) 0%, transparent 70%);
  filter: blur(3px);
  animation: separatorGlow 2s ease-in-out infinite;
}

@keyframes separatorGlow {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.login-separator-text {
  font-size: 13px;
  color: #6b7280;
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: 700;
  padding: 0 8px;
  background: rgba(10, 14, 26, 0.9);
}

/* Section offline avec effet glassmorphism */
.offline-section {
  background: rgba(99, 102, 241, 0.08);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(99, 102, 241, 0.25);
  border-radius: 20px;
  padding: 28px;
  animation: slideInOffline 0.9s cubic-bezier(0.16, 1, 0.3, 1) 0.8s both;
  position: relative;
}

@keyframes slideInOffline {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Effet de brillance sur la section offline */
.offline-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(99, 102, 241, 0.6) 50%,
    transparent 100%
  );
  animation: borderShine 3s linear infinite;
}

@keyframes borderShine {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 1; }
}

/* Input offline avec effets avancés */
.offline-input {
  width: 100%;
  padding: 16px 22px;
  background: rgba(10, 14, 26, 0.95);
  border: 2px solid rgba(99, 102, 241, 0.35);
  border-radius: 14px;
  color: white;
  font-size: 15px;
  margin-bottom: 16px;
  transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  box-sizing: border-box;
  font-weight: 500;
  letter-spacing: 0.3px;
}

.offline-input:focus {
  outline: none;
  border-color: #6366f1;
  background: rgba(10, 14, 26, 1);
  box-shadow: 
    0 0 0 5px rgba(99, 102, 241, 0.18),
    0 0 40px rgba(99, 102, 241, 0.4),
    0 8px 20px rgba(0, 0, 0, 0.3);
  transform: scale(1.02);
}

.offline-input::placeholder {
  color: #6b7280;
  font-weight: 400;
}

/* Bouton offline premium */
.btn-offline {
  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
  background-size: 200% 100%;
  color: white;
  box-shadow: 
    0 10px 28px rgba(99, 102, 241, 0.55),
    0 0 0 1px rgba(255, 255, 255, 0.12) inset,
    0 0 40px rgba(99, 102, 241, 0.35);
  position: relative;
  z-index: 1;
  animation: slideInButton 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.9s both;
}

.btn-offline:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 
    0 15px 40px rgba(99, 102, 241, 0.75),
    0 0 0 1px rgba(255, 255, 255, 0.2) inset,
    0 0 60px rgba(99, 102, 241, 0.55);
  background-position: 100% 0;
}

.btn-offline:active {
  transform: translateY(-2px) scale(1);
  box-shadow: 
    0 8px 20px rgba(99, 102, 241, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.15) inset;
}

/* Footer de login avec animations */
.login-footer {
  text-align: center;
  margin-top: 45px;
  padding-top: 28px;
  border-top: 1px solid rgba(99, 102, 241, 0.2);
  animation: slideInFooter 0.8s cubic-bezier(0.16, 1, 0.3, 1) 1s both;
}

@keyframes slideInFooter {
  from {
    opacity: 0;
    transform: translateY(15px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.login-version {
  font-size: 14px;
  color: #6366f1;
  font-weight: 700;
  margin-bottom: 10px;
  letter-spacing: 0.6px;
  text-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
}

.login-status {
  font-size: 13px;
  color: #6b7280;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  font-weight: 500;
}

.login-status::before {
  content: '';
  width: 9px;
  height: 9px;
  background: #10b981;
  border-radius: 50%;
  box-shadow: 
    0 0 15px rgba(16, 185, 129, 0.7),
    0 0 30px rgba(16, 185, 129, 0.4);
  animation: statusPulse 2.5s ease-in-out infinite;
}

@keyframes statusPulse {
  0%, 100% { 
    opacity: 1;
    transform: scale(1);
    box-shadow: 0 0 15px rgba(16, 185, 129, 0.7);
  }
  50% { 
    opacity: 0.7;
    transform: scale(1.2);
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.9);
  }
}

/* État désactivé */
.btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
  filter: grayscale(0.5);
}

.btn:disabled::before,
.btn:disabled::after {
  display: none;
}

/* Responsive amélioré */
@media (max-width: 768px) {
  .login-box {
    padding: 45px 35px;
    max-width: 92%;
    border-radius: 28px;
  }

  .login-logo {
    width: 95px;
    height: 95px;
    font-size: 48px;
    margin-bottom: 28px;
  }

  .login-title {
    font-size: 32px;
  }

  .login-subtitle {
    font-size: 14px;
    margin-bottom: 38px;
  }
  
  .btn {
    padding: 15px 22px;
    font-size: 14px;
  }

  .offline-section {
    padding: 24px;
  }

  .offline-input {
    padding: 14px 18px;
  }
}

@media (max-width: 480px) {
  .login-box {
    padding: 35px 25px;
  }

  .login-logo {
    width: 80px;
    height: 80px;
    font-size: 42px;
  }

  .login-title {
    font-size: 28px;
  }
}

/* Animation de particules flottantes (optionnel - très avancé) */
@keyframes particleFloat {
  0%, 100% { 
    transform: translateY(0) translateX(0) scale(1);
    opacity: 0.4;
  }
  25% {
    transform: translateY(-15px) translateX(10px) scale(1.1);
    opacity: 0.7;
  }
  50% { 
    transform: translateY(-25px) translateX(-10px) scale(0.9);
    opacity: 0.5;
  }
  75% {
    transform: translateY(-15px) translateX(15px) scale(1.05);
    opacity: 0.6;
  }
}

    .btn {
      width: 100%;
      padding: 14px 20px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .btn-microsoft {
      background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 120, 212, 0.3);
    }

    .btn-microsoft:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 120, 212, 0.4);
    }

    .btn-offline {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-offline:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .input-group {
      margin-bottom: 20px;
    }

    .input-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: #cbd5e1;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .input-field {
      width: 100%;
      padding: 12px 16px;
      background: rgba(30, 41, 59, 0.5);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 10px;
      color: #e2e8f0;
      font-size: 14px;
      transition: all 0.3s;
    }

    .input-field:focus {
      outline: none;
      border-color: #6366f1;
      background: rgba(30, 41, 59, 0.8);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    /* ✅ MAIN LAYOUT */
    .main-layout {
      flex: 1;
      display: flex;
      overflow: hidden;
    }

    .sidebar {
      width: 280px;
      background: rgba(15, 23, 42, 0.6);
      border-right: 1px solid rgba(99, 102, 241, 0.1);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .sidebar-header {
      padding: 20px 16px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.1);
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .player-head {
      width: 48px;
      height: 48px;
      border-radius: 4px;
      object-fit: cover;
    }

    .brand-name {
      font-weight: 700;
      font-size: 16px;
      color: #e2e8f0;
    }

    .brand-user {
      font-size: 12px;
      color: #94a3b8;
      margin-top: 2px;
    }

    .sidebar-menu {
      flex: 1;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow-y: auto;
    }

    .menu-item {
      padding: 12px 16px;
      background: transparent;
      border: 1.5px solid transparent;
      color: #cbd5e1;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
    }

    .menu-item:hover {
      background: rgba(99, 102, 241, 0.1);
      color: #e2e8f0;
    }

    .menu-item.active {
      background: rgba(99, 102, 241, 0.15);
      color: #6366f1;
      border: 1.5px solid rgba(99, 102, 241, 0.5);
      border-radius: 12px;
    }

    .menu-icon {
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .menu-icon svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
    }

    .menu-icon i {
      width: 20px;
      height: 20px;
    }

    .sidebar-footer {
      padding: 16px;
      border-top: 1px solid rgba(99, 102, 241, 0.1);
    }

    .btn-logout {
      width: 100%;
      padding: 12px 16px;
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-logout:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
    }

    /* ✅ MAIN CONTENT */
    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 30px;
      background: linear-gradient(135deg, #0f1729 0%, #1a2332 100%);
    }

    .view-container {
      max-width: 1400px;
      margin: 0 auto;
      overflow: hidden;
    }

    .view-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .view-title {
      font-size: 32px;
      font-weight: 700;
      color: #e2e8f0;
    }

    /* ✅ LAUNCH CARD */
    .launch-card-modern {
      background: rgba(30, 41, 59, 0.6);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
    }

    .launch-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 25px;
    }

    .launch-header h2 {
      font-size: 24px;
      color: #e2e8f0;
      margin-bottom: 5px;
    }

    .launch-header p {
      color: #94a3b8;
      font-size: 13px;
    }

    .btn-launch-modern {
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
    }

    .btn-launch-modern:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 28px rgba(99, 102, 241, 0.4);
    }

    .btn-launch-modern:active {
      transform: translateY(0px);
    }

    .btn-launch-modern:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* ✅ STATS */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.1);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      transition: all 0.3s;
    }

    .stat-card:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-2px);
    }

    .stat-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #6366f1;
      flex-shrink: 0;
    }

    .stat-icon svg {
      width: 20px;
      height: 20px;
      stroke: currentColor;
    }

    .stat-content label {
      display: block;
      font-size: 12px;
      color: #94a3b8;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 18px;
      font-weight: 700;
      color: #e2e8f0;
    }

    /* ✅ CARDS */
    .home-card-btn {
      width: 100%;
      margin-top: 12px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 13px;
    }

    .home-card-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    .home-card-btn:active {
      transform: translateY(0px);
    }

    /* ✅ SERVERS */
    .servers-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
      gap: 20px;
    }

    .server-card {
      background: rgba(26, 31, 58, 0.5);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 20px;
      border: 1px solid rgba(99, 102, 241, 0.1);
      display: flex;
      align-items: center;
      gap: 15px;
      transition: all 0.3s;
    }

    .server-card:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .server-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      font-weight: 700;
      flex-shrink: 0;
      color: white;
    }

    .server-info {
      flex: 1;
      min-width: 0;
    }

    .server-info h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 6px 0;
      color: white;
    }

    .server-ip {
      font-size: 13px;
      color: #6366f1;
      margin: 4px 0;
      font-weight: 500;
    }

    .server-desc {
      font-size: 13px;
      color: #9ca3af;
      margin: 6px 0;
      line-height: 1.4;
    }

    .server-players {
      font-size: 12px;
      color: #6b7280;
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .server-players svg {
      width: 14px;
      height: 14px;
    }

    .btn-join {
      padding: 10px 16px;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      border: none;
      border-radius: 10px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }

    .btn-join:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
    }

    .btn-join:active {
      transform: translateY(0px);
    }

    .custom-server-input {
      display: flex;
      gap: 12px;
      align-items: stretch;
    }

    .custom-server-input .input-field {
      flex: 1;
      padding: 12px 16px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid #374151;
      border-radius: 10px;
      color: white;
      font-size: 14px;
    }

    .custom-server-input .input-field:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    #join-custom-server {
      padding: 12px 24px;
      background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 4px 12px rgba(0, 120, 212, 0.3);
    }

    #join-custom-server:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 120, 212, 0.4);
    }

    #join-custom-server:active {
      transform: translateY(0px);
    }

    /* ✅ FRIENDS */
    .friends-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .friend-card {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.1);
      border-radius: 12px;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      transition: all 0.3s;
    }

    .friend-card:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-2px);
    }

    .friend-avatar {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 700;
      color: white;
      flex-shrink: 0;
    }

    .friend-info {
      flex: 1;
    }

    .friend-info h3 {
      font-size: 16px;
      color: #e2e8f0;
      margin-bottom: 5px;
    }

    .friend-status {
      font-size: 12px;
      color: #94a3b8;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .friend-status.online {
      color: #10b981;
    }

    .friend-status.offline {
      color: #ef4444;
    }

    .btn-icon {
      width: 40px;
      height: 40px;
      background: transparent;
      border: none;
      color: #94a3b8;
      cursor: pointer;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .btn-icon:hover {
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
    }

    /* ✅ EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #94a3b8;
    }

    .empty-state h3 {
      color: #cbd5e1;
      margin: 20px 0 10px;
      font-size: 20px;
    }

    /* ✅ NEWS */
    .news-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
    }

    .news-card {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.1);
      border-radius: 12px;
      padding: 25px;
      transition: all 0.3s;
    }

    .news-card:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .news-card h3 {
      font-size: 18px;
      color: #e2e8f0;
      margin-bottom: 8px;
    }

    .news-date {
      font-size: 12px;
      color: #6366f1;
      margin-bottom: 12px;
    }

    .news-card p {
      color: #cbd5e1;
      font-size: 14px;
      line-height: 1.6;
    }

    /* ✅ SHOP */
    .shop-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 25px;
    }

    .shop-card {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.1);
      border-radius: 16px;
      padding: 30px;
      text-align: center;
      transition: all 0.3s;
    }

    .shop-card:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(99, 102, 241, 0.2);
    }

    .shop-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    .shop-card h3 {
      font-size: 18px;
      color: #e2e8f0;
      margin-bottom: 10px;
    }

    .shop-card p {
      color: #94a3b8;
      font-size: 13px;
      margin-bottom: 15px;
      line-height: 1.5;
    }

    .shop-price {
      font-size: 24px;
      font-weight: 700;
      color: #6366f1;
      margin-bottom: 15px;
    }

    .btn-shop {
      width: 100%;
      padding: 12px 20px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-shop:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
    }

    /* ✅ CREATE CARD */
    .create-card {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
    }

    .create-card h3 {
      font-size: 20px;
      color: #e2e8f0;
      margin-bottom: 20px;
    }

    .button-group {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .btn-primary {
      flex: 1;
      padding: 12px 20px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-secondary {
      flex: 1;
      padding: 12px 20px;
      background: rgba(99, 102, 241, 0.1);
      color: #6366f1;
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-secondary:hover {
      background: rgba(99, 102, 241, 0.2);
    }

    .btn-add-modern {
      padding: 12px 20px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn-add-modern:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    /* ✅ SCROLLBAR */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(99, 102, 241, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(99, 102, 241, 0.5);
    }

    /* ✅ ANIMATIONS */
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0px);
      }
    }

    /* ✅ MODALS HIDDEN BY DEFAULT */
    #mod-details-modal,
    #installed-mods-modal,
    #load-more-mods-modal {
      display: none !important;
    }

    .mod-item {
      width: 100% !important;
      display: flex !important;
      flex-direction: row !important;
    }

    /* Container des mods */
    .mods-container {
      display: flex !important;
      flex-direction: column !important;
      gap: 12px !important;
    }

    /* ✅ RESPONSIVE */
    @media (max-width: 1024px) {
      .main-layout {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid rgba(99, 102, 241, 0.1);
      }

      .sidebar-menu {
        flex-direction: row;
        padding: 8px;
        gap: 4px;
      }

      .menu-item {
        padding: 8px 12px;
        font-size: 12px;
        flex: 1;
      }

      .main-content {
        padding: 20px;
      }

      .servers-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }
    }

    /* ✅ RADIO PLAYER STYLES */
    #radio-modal {
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        backdrop-filter: blur(0px);
      }
      to {
        opacity: 1;
        backdrop-filter: blur(5px);
      }
    }

    .radio-station-btn {
      display: inline-block;
      cursor: pointer;
    }

    .radio-station-btn:active {
      transform: scale(0.95);
    }

    /* ✅ SCROLLBAR */
    #radio-modal::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    #radio-modal::-webkit-scrollbar-track {
      background: transparent;
    }

    #radio-modal::-webkit-scrollbar-thumb {
      background: rgba(99, 102, 241, 0.3);
      border-radius: 4px;
    }

    #radio-modal::-webkit-scrollbar-thumb:hover {
      background: rgba(99, 102, 241, 0.5);
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        box-shadow: 0 20px 60px rgba(99, 102, 241, 0.4);
      }
      50% {
        transform: scale(1.05);
        box-shadow: 0 20px 80px rgba(99, 102, 241, 0.6);
      }
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    @keyframes pulse-dot {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }

    @keyframes spinMajor {
      0% {
        transform: rotate(0deg) scale(1);
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.6), inset 0 0 20px rgba(99, 102, 241, 0.2);
      }
      50% {
        transform: rotate(180deg) scale(1.1);
        box-shadow: 0 0 40px rgba(99, 102, 241, 0.8), inset 0 0 30px rgba(99, 102, 241, 0.4);
      }
      100% {
        transform: rotate(360deg) scale(1);
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.6), inset 0 0 20px rgba(99, 102, 241, 0.2);
      }
    }

    @keyframes spinMinor {
      0% {
        transform: rotate(0deg) scale(1);
        box-shadow: 0 0 15px rgba(168, 85, 247, 0.4);
      }
      50% {
        transform: rotate(-180deg) scale(0.9);
        box-shadow: 0 0 30px rgba(168, 85, 247, 0.7);
      }
      100% {
        transform: rotate(-360deg) scale(1);
        box-shadow: 0 0 15px rgba(168, 85, 247, 0.4);
      }
    }

    /* ✅ FORCER LES MODS EN COLONNE */
    .mods-list-container {
      display: flex !important;
      flex-direction: column !important;
      gap: 12px !important;
      width: 100% !important;
    }

    .mod-item {
      width: 100% !important;
      display: flex !important;
      flex-direction: row !important;
      flex-wrap: nowrap !important;
    }

   * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      overflow: hidden;
      background: #0a0a0a;
    }

    #loading-screen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(1200px 1200px at 50% 30%, rgba(99, 102, 241, 0.12) 0%, transparent 60%), #0b1220;
      z-index: 3000;
      transition: opacity 0.4s ease, visibility 0.4s ease;
    }

    #loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    .loading-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      opacity: 0.9;
    }

    .grid-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      opacity: 0.85;
    }

    .loading-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 16px;
      padding: 28px 32px;
      background: rgba(8, 12, 24, 0.6);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 16px;
      box-shadow: 0 30px 90px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(99, 102, 241, 0.12) inset;
      backdrop-filter: blur(12px);
      position: relative;
      z-index: 1;
    }

    .hex-grid {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      background:
        repeating-linear-gradient(60deg, rgba(148,163,184,0.06) 0 2px, transparent 2px 60px),
        repeating-linear-gradient(-60deg, rgba(148,163,184,0.06) 0 2px, transparent 2px 60px),
        repeating-linear-gradient(0deg, rgba(148,163,184,0.04) 0 1px, transparent 1px 50px);
      mix-blend-mode: overlay;
      opacity: 0.35;
    }

    .scan-sweep {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      transform-origin: 50% 50%;
      background: radial-gradient(80% 80% at 50% 50%, rgba(99,102,241,0.06) 0%, rgba(34,211,238,0.05) 20%, transparent 60%);
      animation: sweepRotate 8s linear infinite;
      opacity: 0.6;
    }

    .hud-corner {
      position: absolute;
      width: 24px;
      height: 24px;
      pointer-events: none;
      background:
        linear-gradient(90deg, rgba(99,102,241,0.6) 0 12px, transparent 12px),
        linear-gradient(180deg, rgba(99,102,241,0.6) 0 12px, transparent 12px);
      filter: drop-shadow(0 0 6px rgba(99,102,241,0.35));
      opacity: 0.8;
      z-index: 2;
    }
    .hud-corner.tl { top: 10px; left: 10px; transform: rotate(0deg); }
    .hud-corner.tr { top: 10px; right: 10px; transform: rotate(90deg); }
    .hud-corner.br { bottom: 10px; right: 10px; transform: rotate(180deg); }
    .hud-corner.bl { bottom: 10px; left: 10px; transform: rotate(270deg); }

    .edge-runner {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 2px;
      pointer-events: none;
      background: linear-gradient(180deg, rgba(56,189,248,0), rgba(56,189,248,0.8), rgba(56,189,248,0)) no-repeat 0 0/100% 22%;
      animation: runner 2.6s linear infinite;
      opacity: 0.7;
      z-index: 0;
    }
    .edge-runner.left { left: 12px; }
    .edge-runner.right { right: 12px; animation-duration: 3.3s; }

    .loading-logo {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: 0.5px;
      background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .neon-system {
      position: relative;
      width: 132px;
      height: 132px;
      margin: 6px 0 8px;
    }

    .neon-ring {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      position: relative;
      margin: 0 auto;
      filter: drop-shadow(0 0 12px rgba(99,102,241,0.35));
    }

    .pulse-rings {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 2;
    }

    .pulse {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      transform: translate(-50%, -50%) scale(0.4);
      border: 1px solid rgba(99,102,241,0.35);
      animation: pulse 2.8s ease-out infinite;
    }

    .pulse.p2 { border-color: rgba(34,211,238,0.35); animation-delay: 1.4s; }

    .neon-ring::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 50%, rgba(99,102,241,0.18), transparent 60%);
    }

    .neon-ring::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: conic-gradient(
        #22d3ee 0deg 18deg,
        transparent 18deg 36deg,
        #a855f7 36deg 54deg,
        transparent 54deg 72deg,
        #6366f1 72deg 90deg,
        transparent 90deg 108deg,
        #14b8a6 108deg 126deg,
        transparent 126deg 144deg,
        #22d3ee 144deg 162deg,
        transparent 162deg 180deg,
        #a855f7 180deg 198deg,
        transparent 198deg 216deg,
        #6366f1 216deg 234deg,
        transparent 234deg 252deg,
        #14b8a6 252deg 270deg,
        transparent 270deg 360deg
      );
      -webkit-mask: radial-gradient(circle, transparent 58%, #000 59%);
      mask: radial-gradient(circle, transparent 58%, #000 59%);
      animation: spin 1.6s linear infinite;
    }

    .neon-core {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 18px;
      height: 18px;
      transform: translate(-50%, -50%);
      border-radius: 50%;
      background: radial-gradient(circle at 40% 40%, #22d3ee, #6366f1);
      box-shadow: 0 0 25px rgba(99,102,241,0.6), 0 0 40px rgba(34,211,238,0.35);
      animation: corePulse 1.8s ease-in-out infinite;
    }

    .ring-b {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 132px;
      height: 132px;
      filter: drop-shadow(0 0 12px rgba(34,211,238,0.25));
    }

    .ring-b::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: conic-gradient(
        transparent 0deg 24deg,
        #38bdf8 24deg 40deg,
        transparent 40deg 80deg,
        #8b5cf6 80deg 92deg,
        transparent 92deg 140deg,
        #14b8a6 140deg 150deg,
        transparent 150deg 210deg,
        #22d3ee 210deg 222deg,
        transparent 222deg 270deg,
        #60a5fa 270deg 288deg,
        transparent 288deg 360deg
      );
      -webkit-mask: radial-gradient(circle, transparent 70%, #000 71%);
      mask: radial-gradient(circle, transparent 70%, #000 71%);
      animation: spinRev 2.3s linear infinite;
    }

    .glyph-ring {
      position: absolute;
      inset: 0;
      display: block;
      pointer-events: none;
      filter: drop-shadow(0 0 6px rgba(99,102,241,0.35));
      animation: spin 12s linear infinite;
    }

    .glyph-char {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: 0 0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 10px;
      color: rgba(203,213,225,0.8);
      letter-spacing: 0.2px;
    }

    .progress-arc {
      position: absolute;
      inset: 0;
      transform: rotate(-90deg);
      z-index: 1;
      pointer-events: none;
    }

    .progress-arc circle {
      fill: none;
      stroke: rgba(56,189,248,0.9);
      stroke-width: 3;
      stroke-linecap: round;
      filter: drop-shadow(0 0 4px rgba(56,189,248,0.6));
      stroke-dasharray: 0;
      stroke-dashoffset: 0;
    }

    .ring-orbit {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 156px;
      height: 156px;
      transform: translate(-50%, -50%);
      pointer-events: none;
    }

    .orbit-dot {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #a78bfa, #6366f1);
      box-shadow: 0 0 12px rgba(99, 102, 241, 0.8), 0 0 22px rgba(99, 102, 241, 0.5);
    }

    .orbit-dot.od1 { transform: translate(-50%, -50%) rotate(0deg) translateX(68px); animation: orbitCW 3.2s linear infinite; }
    .orbit-dot.od2 { transform: translate(-50%, -50%) rotate(120deg) translateX(52px); background: radial-gradient(circle at 30% 30%, #22d3ee, #60a5fa); box-shadow: 0 0 12px rgba(56,189,248,0.8), 0 0 22px rgba(56,189,248,0.5); animation: orbitCCW 4.1s linear infinite; }
    .orbit-dot.od3 { transform: translate(-50%, -50%) rotate(240deg) translateX(40px); background: radial-gradient(circle at 30% 30%, #14b8a6, #22d3ee); box-shadow: 0 0 12px rgba(20,184,166,0.8), 0 0 22px rgba(20,184,166,0.5); animation: orbitCW 5.2s linear infinite; }

    .voxel-scene {
      width: 120px;
      height: 120px;
      perspective: 600px;
      margin-top: 2px;
      margin-bottom: 8px;
    }

    .voxel-cube {
      width: 84px;
      height: 84px;
      position: relative;
      transform-style: preserve-3d;
      transform: rotateX(-20deg) rotateY(30deg);
      margin: 0 auto;
      top: 18px;
      animation: rotateCube 5s linear infinite;
    }

    .voxel-cube .face {
      position: absolute;
      width: 84px;
      height: 84px;
      border: 1px solid rgba(0,0,0,0.2);
      box-shadow: inset 0 0 20px rgba(0,0,0,0.25);
    }

    .face--front  { transform: translateZ(42px); background: linear-gradient(135deg,#334155,#475569); }
    .face--back   { transform: rotateY(180deg) translateZ(42px); background: linear-gradient(135deg,#1f2937,#374151); }
    .face--right  { transform: rotateY(90deg) translateZ(42px); background: linear-gradient(135deg,#4f46e5,#7c3aed); }
    .face--left   { transform: rotateY(-90deg) translateZ(42px); background: linear-gradient(135deg,#10b981,#059669); }
    .face--top    { transform: rotateX(90deg) translateZ(42px); background: linear-gradient(135deg,#9ca3af,#e5e7eb); }
    .face--bottom { transform: rotateX(-90deg) translateZ(42px); background: linear-gradient(135deg,#0f172a,#1f2937); }

    @keyframes rotateCube {
      0%   { transform: rotateX(-20deg) rotateY(0deg); }
      50%  { transform: rotateX(-20deg) rotateY(180deg); }
      100% { transform: rotateX(-20deg) rotateY(360deg); }
    }

    .loading-orbit {
      position: relative;
      width: 84px;
      height: 84px;
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .loading-dot {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #a78bfa, #6366f1);
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.8), 0 0 22px rgba(99, 102, 241, 0.5);
    }

    .loading-dot.dot1 {
      transform: translate(-50%, -50%) translateX(36px);
      animation: orbitCW 2.4s linear infinite;
    }

    .loading-dot.dot2 {
      transform: translate(-50%, -50%) translateX(24px);
      background: radial-gradient(circle at 30% 30%, #f472b6, #a855f7);
      box-shadow: 0 0 10px rgba(236, 72, 153, 0.7), 0 0 22px rgba(168, 85, 247, 0.5);
      animation: orbitCCW 3.2s linear infinite;
    }

    .loading-text {
      color: #cbd5e1;
      font-size: 14px;
    }

    .loading-stats {
      display: flex;
      gap: 12px;
      margin-top: -4px;
      margin-bottom: -2px;
    }

    .stat {
      font-size: 11px;
      color: #cbd5e1;
      padding: 4px 8px;
      border-radius: 8px;
      background: rgba(30,41,59,0.5);
      border: 1px solid rgba(99,102,241,0.2);
      min-width: 92px;
      text-align: center;
    }

    .loading-logs {
      list-style: none;
      margin: 0;
      padding: 0;
      width: 260px;
      max-height: 54px;
      overflow: hidden;
      color: #94a3b8;
      font-size: 11px;
      line-height: 1.35;
      text-align: left;
      opacity: 0.9;
    }

    .loading-logs li {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }

    .loading-subtext {
      color: #94a3b8;
      font-size: 12px;
      min-height: 16px;
      opacity: 0.9;
    }

    .chips {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: -4px;
    }

    .chip {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      letter-spacing: .4px;
      color: #e2e8f0;
      background: linear-gradient(90deg, rgba(99,102,241,0.25), rgba(168,85,247,0.25));
      border: 1px solid rgba(99,102,241,0.25);
      opacity: .55;
      transition: opacity .3s ease, box-shadow .3s ease, transform .3s ease;
    }

    .chip.active {
      opacity: 1;
      box-shadow: 0 0 10px rgba(99,102,241,0.5);
      transform: translateY(-1px);
    }

    .loading-progress {
      width: 220px;
      height: 6px;
      background: rgba(99, 102, 241, 0.15);
      border: 1px solid rgba(99, 102, 241, 0.25);
      border-radius: 999px;
      overflow: hidden;
      position: relative;
    }

    .loading-progress-bar {
      width: 0%;
      height: 100%;
      background: linear-gradient(90deg, #6366f1, #8b5cf6, #a855f7);
      background-size: 200% 100%;
      animation: gradientShift 3s linear infinite;
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.6);
    }

    .loading-progress::after {
      content: '';
      position: absolute;
      top: 0;
      bottom: 0;
      width: 40px;
      left: -40px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      animation: shimmer 1.8s linear infinite;
      filter: blur(1px);
    }

    .loading-percent {
      font-size: 12px;
      color: #94a3b8;
      letter-spacing: 1px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes spinRev {
      to { transform: rotate(-360deg); }
    }

    @keyframes sweepRotate {
      to { transform: rotate(360deg); }
    }

    @keyframes runner {
      0% { background-position-y: -30%; }
      100% { background-position-y: 130%; }
    }

    @keyframes pulse {
      0% { transform: translate(-50%, -50%) scale(0.4); opacity: 0.8; }
      100% { transform: translate(-50%, -50%) scale(6); opacity: 0; }
    }

    @keyframes orbitCW {
      from { transform: translate(-50%, -50%) rotate(0deg) translateX(0); }
      to { transform: translate(-50%, -50%) rotate(360deg) translateX(0); }
    }

    @keyframes orbitCCW {
      from { transform: translate(-50%, -50%) rotate(0deg) translateX(0); }
      to { transform: translate(-50%, -50%) rotate(-360deg) translateX(0); }
    }

    @keyframes corePulse {
      0%, 100% { transform: translate(-50%,-50%) scale(1); opacity: 1; }
      50% { transform: translate(-50%,-50%) scale(1.15); opacity: 0.9; }
    }

    @keyframes shimmer {
      0% { left: -40px; }
      100% { left: 240px; }
    }

</style>
</head>
<body>
  <div id="loading-screen">
    <canvas id="loading-canvas" class="loading-canvas"></canvas>
    <div class="hex-grid"></div>
    <div class="scan-sweep"></div>
    <canvas id="grid-canvas" class="grid-canvas"></canvas>
    <div class="hud-corner tl"></div>
    <div class="hud-corner tr"></div>
    <div class="hud-corner br"></div>
    <div class="hud-corner bl"></div>
    <div class="edge-runner left"></div>
    <div class="edge-runner right"></div>
    <div class="loading-content">
      <div class="loading-logo">CraftLauncher</div>
      <div class="neon-system">
        <div class="neon-ring"><div class="neon-core"></div></div>
        <div class="neon-ring ring-b"></div>
        <svg id="progress-arc" class="progress-arc" width="132" height="132" viewBox="0 0 132 132">
          <circle id="progress-arc-c" cx="66" cy="66" r="56"></circle>
        </svg>
        <div class="pulse-rings">
          <div class="pulse p1"></div>
          <div class="pulse p2"></div>
        </div>
        <div id="glyph-ring" class="glyph-ring"></div>
        <div class="ring-orbit">
          <div class="orbit-dot od1"></div>
          <div class="orbit-dot od2"></div>
          <div class="orbit-dot od3"></div>
        </div>
      </div>
      <div class="loading-text">Chargement...</div>
      <div id="loading-subtext" class="loading-subtext"></div>
      <div id="loading-chips" class="chips">
        <span class="chip">Noyau</span>
        <span class="chip">Modules</span>
        <span class="chip">Réseau</span>
        <span class="chip">Interface</span>
        <span class="chip">Finalisation</span>
      </div>
      <div class="loading-stats">
        <div class="stat" id="stat-cpu">CPU 0%</div>
        <div class="stat" id="stat-ram">RAM 0.0 GB</div>
        <div class="stat" id="stat-net">NET 0 ms</div>
      </div>
      <div class="loading-progress"><div id="loading-progress-bar" class="loading-progress-bar"></div></div>
      <div id="loading-percent" class="loading-percent">0%</div>
      <ul id="loading-logs" class="loading-logs">
        <li>Initialisation…</li>
      </ul>
    </div>
  </div>
  <div id="app"></div>
  <script>
    (function () {
      var loading = document.getElementById('loading-screen');
      var startTs = Date.now();
      var minDisplayMs = 4000;
      var isHiding = false;
      var timerId = null;
      var bar = document.getElementById('loading-progress-bar');
      var pct = document.getElementById('loading-percent');
      var msg = document.querySelector('.loading-text');
      var sub = document.getElementById('loading-subtext');
      var chips = document.getElementById('loading-chips');
      var chipEls = chips ? chips.querySelectorAll('.chip') : [];
      var statCPU = document.getElementById('stat-cpu');
      var statRAM = document.getElementById('stat-ram');
      var statNET = document.getElementById('stat-net');
      var logsEl = document.getElementById('loading-logs');
      var glyph = document.getElementById('glyph-ring');
      var arcC = document.getElementById('progress-arc-c');
      var arcLen = 2 * Math.PI * 56;
      var prog = 0;
      var rafProg = null;
      var tipTimer = null;
      var steps = [
        'Initialisation du noyau…',
        'Chargement des modules…',
        'Synchronisation des profils…',
        'Connexion aux services…',
        'Préparation de l’interface…',
        'Finalisation…'
      ];
      var substeps = [
        'Allocation mémoire',
        'Vérification des ressources',
        'Mise en cache',
        'Optimisation du rendu',
        'Génération des assets',
        'Validation'
      ];
      var stepIndex = 0;
      var fxLevel = window.devicePixelRatio > 1.2 ? 2 : 1;
      function easeOutCubic(x){ return 1 - Math.pow(1 - Math.max(0, Math.min(1, x)), 3); }
      function setProgress(p){
        prog = Math.max(0, Math.min(100, p|0));
        if (bar) bar.style.width = prog + '%';
        if (pct) pct.textContent = prog + '%';
        if (arcC) {
          arcC.style.strokeDasharray = arcLen;
          arcC.style.strokeDashoffset = arcLen * (1 - prog / 100);
        }
      }
      function runProgress(){
        var t = Date.now() - startTs;
        var target = Math.min(95, Math.floor(easeOutCubic(t / minDisplayMs) * 95));
        if (target > prog) setProgress(target);
        rafProg = requestAnimationFrame(runProgress);
      }
      runProgress();
      function cycleSteps(){
        if (msg) msg.textContent = steps[stepIndex % steps.length];
        if (sub) sub.textContent = substeps[stepIndex % substeps.length];
        if (chipEls && chipEls.length) {
          for (var i=0;i<chipEls.length;i++){
            chipEls[i].classList.toggle('active', i === (stepIndex % chipEls.length));
          }
        }
        spawnBurst(w/2, h/2);
        addLog(steps[stepIndex % steps.length]);
        stepIndex++;
      }
      cycleSteps();
      tipTimer = setInterval(cycleSteps, 1000);

      var canvas = document.getElementById('loading-canvas');
      var ctx = canvas ? canvas.getContext('2d') : null;
      var w = 0, h = 0, stars = [], sparks = [], comets = [], rafId = null;
      var gcan = document.getElementById('grid-canvas');
      var gctx = gcan ? gcan.getContext('2d') : null;
      var gw = 0, gh = 0, rafGrid = null;
      var gx = 0, gy = 0, gtx = 0, gty = 0;
      var gTime = 0;
      function mixColor(a,b,t,alpha){
        var r = Math.round(a[0]*(1-t)+b[0]*t);
        var g = Math.round(a[1]*(1-t)+b[1]*t);
        var bl = Math.round(a[2]*(1-t)+b[2]*t);
        return 'rgba('+r+','+g+','+bl+','+alpha+')';
      }
      var colA = [56,189,248];
      var colB = [167,139,250];
      function resize(){
        if (!canvas) return;
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
        var count = Math.min(700, Math.max(220, Math.floor(w * h / (fxLevel===2?5200:7400))));
        stars = [];
        var palette = ['#22d3ee','#60a5fa','#a78bfa','#14b8a6','#8b5cf6','#38bdf8'];
        for (var i=0;i<count;i++) stars.push({
          x: Math.random()*w,
          y: Math.random()*h,
          s: Math.random()*1.8 + 0.5,
          v: Math.random()*0.6 + 0.22,
          dx: (Math.random()-0.5)*0.25,
          a: Math.random()*0.6 + 0.25,
          p: Math.random()*Math.PI*2,
          c: palette[(Math.random()*palette.length)|0]
        });
        if (gcan) {
          gw = gcan.width = window.innerWidth;
          gh = gcan.height = window.innerHeight;
          gx = gw/2; gy = gh/2; gtx = gx; gty = gy;
        }
      }
      function gridTick(){
        if (!gctx) { rafGrid = requestAnimationFrame(gridTick); return; }
        gTime += 0.016;
        gx += (gtx - gx) * 0.12;
        gy += (gty - gy) * 0.12;
        gctx.clearRect(0,0,gw,gh);
        var s = fxLevel===2 ? 52 : 56;
        var offX = ((gTime*48)%s);
        var offY = ((gTime*36)%s);
        var radius = s * 3.4;
        gctx.lineWidth = 1;
        for (var x=-offX; x<gw+1; x+=s){
          var dx = Math.abs(x - gx);
          var t = Math.max(0, Math.min(1, 1 - dx/radius));
          var a = 0.08 + 0.32*t;
          gctx.strokeStyle = mixColor(colA, colB, t*0.7, a);
          gctx.beginPath();
          gctx.moveTo(x, 0);
          gctx.lineTo(x, gh);
          gctx.stroke();
        }
        for (var y=-offY; y<gh+1; y+=s){
          var dy = Math.abs(y - gy);
          var t2 = Math.max(0, Math.min(1, 1 - dy/radius));
          var a2 = 0.08 + 0.32*t2;
          gctx.strokeStyle = mixColor(colB, colA, t2*0.7, a2);
          gctx.beginPath();
          gctx.moveTo(0, y);
          gctx.lineTo(gw, y);
          gctx.stroke();
        }
        var cx = Math.round((gx+offX)/s)*s - offX;
        var cy = Math.round((gy+offY)/s)*s - offY;
        var grad = gctx.createRadialGradient(gx, gy, 0, gx, gy, radius*1.2);
        grad.addColorStop(0, mixColor(colA, colB, 0.3, 0.18));
        grad.addColorStop(1, 'rgba(0,0,0,0)');
        gctx.fillStyle = grad;
        gctx.fillRect(0,0,gw,gh);
        gctx.strokeStyle = 'rgba(56,189,248,0.8)';
        gctx.lineWidth = 1.5;
        gctx.beginPath();
        gctx.moveTo(cx, 0);
        gctx.lineTo(cx, gh);
        gctx.moveTo(0, cy);
        gctx.lineTo(gw, cy);
        gctx.stroke();
        gctx.fillStyle = 'rgba(99,102,241,0.12)';
        gctx.strokeStyle = 'rgba(168,85,247,0.6)';
        gctx.lineWidth = 1;
        gctx.beginPath();
        gctx.rect(cx - s/2 + 1, cy - s/2 + 1, s - 2, s - 2);
        gctx.fill();
        gctx.stroke();
        gctx.fillStyle = 'rgba(167,139,250,0.9)';
        for (var xi=cx - s*2; xi<=cx + s*2; xi+=s){
          for (var yi=cy - s*2; yi<=cy + s*2; yi+=s){
            var ddx = xi - gx, ddy = yi - gy;
            var d = Math.sqrt(ddx*ddx + ddy*ddy);
            if (d < radius*0.9) {
              var op = Math.max(0, 1 - d/(radius*0.9));
              gctx.globalAlpha = 0.15 + 0.45*op;
              gctx.fillRect(xi-1, yi-1, 2, 2);
            }
          }
        }
        gctx.globalAlpha = 1;
        rafGrid = requestAnimationFrame(gridTick);
      }
      if (gcan) {
        gx = window.innerWidth/2; gy = window.innerHeight/2; gtx = gx; gty = gy;
        window.addEventListener('mousemove', function(e){ gtx = e.clientX; gty = e.clientY; });
        window.addEventListener('resize', function(){ if (gcan){ gw = gcan.width = window.innerWidth; gh = gcan.height = window.innerHeight; }});
        rafGrid = requestAnimationFrame(gridTick);
      }
      function spawnBurst(cx, cy){
        var n = fxLevel===2 ? 32 : 20;
        for (var i=0;i<n;i++){
          var ang = Math.random()*Math.PI*2;
          var sp = 1+Math.random()*2.2;
          sparks.push({x:cx,y:cy,vx:Math.cos(ang)*sp,vy:Math.sin(ang)*sp,life:40+Math.random()*20,c:'#'+((Math.random()*0xffffff)|0).toString(16).padStart(6,'0')});
        }
      }
      function spawnComet(){
        var side = Math.random()<0.5?'left':'right';
        var y0 = Math.random()*h*0.8+0.1*h;
        var vx = side==='left' ? (1.2+Math.random()*1.4) : (-1.2-Math.random()*1.4);
        var x0 = side==='left'? -20 : w+20;
        comets.push({x:x0,y:y0,vx:vx,vy:(Math.random()-0.5)*0.4,life:160,color:'#60a5fa'});
      }
      function addLog(t){
        if (!logsEl) return;
        var li = document.createElement('li');
        li.textContent = t.replace(/\.\.\.$/,'…');
        logsEl.insertBefore(li, logsEl.firstChild);
        while (logsEl.children.length > 4) logsEl.removeChild(logsEl.lastChild);
      }
      function buildGlyphs(){
        if (!glyph) return;
        glyph.innerHTML = '';
        var chars = '0123456789ABCDEF';
        var total = 48;
        var radius = 62;
        for (var i=0;i<total;i++){
          var span = document.createElement('span');
          span.className = 'glyph-char';
          span.textContent = chars[i%chars.length];
          var angle = (i/total)*360;
          span.style.transform = 'rotate('+angle+'deg) translate('+radius+'px) rotate('+(-angle)+'deg)';
          span.style.opacity = 0.6 + 0.4*Math.sin((i/total)*Math.PI*2);
          glyph.appendChild(span);
        }
      }
      function tick(){
        if (!ctx) { rafId = requestAnimationFrame(tick); return; }
        ctx.clearRect(0,0,w,h);
        for (var i=0;i<stars.length;i++){
          var st = stars[i];
          st.y += st.v;
          st.x += st.dx;
          if (st.y > h) { st.y = -2; st.x = Math.random()*w; }
          if (st.x > w) st.x = 0;
          if (st.x < 0) st.x = w;
          st.p += 0.02;
          var tw = st.a * (0.6 + 0.4 * Math.sin(st.p));
          ctx.globalAlpha = Math.max(0.08, Math.min(0.9, tw));
          ctx.beginPath();
          ctx.arc(st.x, st.y, st.s, 0, Math.PI*2);
          ctx.fillStyle = st.c;
          ctx.shadowColor = st.c;
          ctx.shadowBlur = 16;
          ctx.fill();
        }
        ctx.shadowBlur = 0;
        ctx.globalAlpha = 0.25;
        ctx.lineWidth = 0.6;
        var step = fxLevel===2 ? 5 : 7;
        var neighbors = fxLevel===2 ? 5 : 3;
        var maxD2 = (fxLevel===2 ? 85 : 70);
        maxD2 = maxD2*maxD2;
        for (var i2=0;i2<stars.length;i2+=step){
          var a = stars[i2];
          var countN = 0;
          for (var j=i2+1;j<Math.min(i2+18, stars.length);j++){
            var b = stars[j];
            var dx = a.x - b.x;
            var dy = a.y - b.y;
            var d2 = dx*dx + dy*dy;
            if (d2 < maxD2) {
              var op = 0.12 * (1 - d2/maxD2);
              ctx.strokeStyle = 'rgba(129,140,248,'+op.toFixed(3)+')';
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.stroke();
              countN++;
              if (countN >= neighbors) break;
            }
          }
        }
        ctx.shadowBlur = 0;
        ctx.globalAlpha = 0.9;
        for (var i=0;i<sparks.length;i++){
          var sp = sparks[i];
          sp.x += sp.vx;
          sp.y += sp.vy;
          sp.vx *= 0.98;
          sp.vy *= 0.98;
          sp.life -= 1;
          ctx.beginPath();
          ctx.arc(sp.x, sp.y, 1.2, 0, Math.PI*2);
          ctx.fillStyle = sp.color;
          ctx.fill();
        }
        sparks = sparks.filter(function(s){return s.life>0 && s.x>-50 && s.x<w+50 && s.y>-50 && s.y<h+50;});
        if (Math.random() < 0.01) spawnComet();
        ctx.globalAlpha = 1;
        for (var i=0;i<comets.length;i++){
          var cm = comets[i];
          cm.x += cm.vx;
          cm.y += cm.vy;
          cm.life -= 1;
          ctx.beginPath();
          ctx.arc(cm.x, cm.y, 2.2, 0, Math.PI*2);
          ctx.fillStyle = cm.color;
          ctx.shadowColor = cm.color;
          ctx.shadowBlur = 12;
          ctx.fill();
        }
        ctx.shadowBlur = 0;
        comets = comets.filter(function(c){return c.life>0 && c.x>-80 && c.x<w+80;});
        ctx.shadowBlur = 0;
        ctx.globalAlpha = 1;
        rafId = requestAnimationFrame(tick);
      }
      if (canvas) {
        resize();
        window.addEventListener('resize', resize);
        rafId = requestAnimationFrame(tick);
        buildGlyphs();
      }
      var statsTimer = null;
      function updateStats(){
        if (statCPU) statCPU.textContent = 'CPU ' + (10 + Math.floor(Math.random()*40)) + '%';
        if (statRAM) statRAM.textContent = 'RAM ' + (1.2 + Math.random()*2.5).toFixed(1) + ' GB';
        if (statNET) statNET.textContent = 'NET ' + (10 + Math.floor(Math.random()*50)) + ' ms';
      }
      updateStats();
      statsTimer = setInterval(updateStats, 900);
      function hideLoading() {
        if (!loading || isHiding) return;
        var elapsed = Date.now() - startTs;
        if (elapsed < minDisplayMs) {
          if (timerId) return;
          timerId = setTimeout(hideLoading, minDisplayMs - elapsed);
          return;
        }
        setProgress(100);
        isHiding = true;
        loading.classList.add('hidden');
        setTimeout(function () {
          if (loading && loading.parentNode) loading.style.display = 'none';
          if (rafId) cancelAnimationFrame(rafId);
          if (rafProg) cancelAnimationFrame(rafProg);
          if (tipTimer) clearInterval(tipTimer);
          if (statsTimer) clearInterval(statsTimer);
          if (rafGrid) cancelAnimationFrame(rafGrid);
        }, 450);
      }
      document.addEventListener('DOMContentLoaded', function () {
        var app = document.getElementById('app');
        if (app && app.children && app.children.length > 0) {
          hideLoading();
          return;
        }
        try {
          var mo = new MutationObserver(function () {
            if (app && app.children && app.children.length > 0) {
              mo.disconnect();
              hideLoading();
            }
          });
          if (app) mo.observe(app, { childList: true });
        } catch (_) {}
        setTimeout(hideLoading, 8000);
      });
      window.addEventListener('load', function () { setTimeout(hideLoading, 0); });
      window.addEventListener('app-ready', hideLoading);
    })();
  </script>
  <script src="app.js"></script>
</body>
</html>
